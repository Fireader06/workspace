<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>Settings - Phonics Breaker</title>
    <link rel="stylesheet" href="settings.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <style>
    #bottomBar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;

      background: rgb(235, 235, 235);
      display: flex;
      justify-content: center;
      align-items: center;

      box-shadow: 0 -3px 8px rgba(0, 0, 0, 0.15);
    }

    #bottomBar button {
      background: hsl(280, 75%, 50%);
      color: rgb(255, 255, 255);
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    #bottomBar button:hover {
      background: hsl(280, 75%, 50%);
    }
  </style>
  <div id="bottomBar">
    <button onclick="location.href='index.html'">Back to Home</button>
  </div>
  <body>
    <h1>Game Settings</h1>

    <div class="settings-container">
      <!-- Volume -->
      <label for="volume">Volume</label>
      <input type="number" id="volume" min="0" max="100" value="75" step="5" />

      <!-- Theme -->
      <label for="theme">Theme</label>
      <select id="theme">
        <option value="default" selected>Default</option>
        <option value="dark">Dark</option>
        <option value="pastel">Pastel</option>
      </select>

      <!-- News Ticker Settings -->
      <h2>News Ticker Settings</h2>

      <label for="tickerSpeed"
        >Ticker Speed (<span id="tickerSpeedValue">50</span> px/sec)</label
      >
      <input
        type="range"
        id="tickerSpeed"
        min="10"
        max="300"
        value="50"
        step="5"
      />

      <label for="spacerLength"
        >Spacer Length (<span id="spacerLengthValue">50</span> px)</label
      >
      <input
        type="range"
        id="spacerLength"
        min="10"
        max="200"
        value="50"
        step="5"
      />

      <label for="spacerType">Spacer Type</label>
      <select id="spacerType">
        <option value="space" selected>Spaces</option>
        <option value="dashed">Dashed</option>
      </select>

      <!-- Buttons -->
      <div class="actions">
        <button class="btn-primary" id="saveSettings">Save</button>
        <button class="btn-secondary" id="resetSettings">Reset</button>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay hidden" id="settingsModal">
      <div class="modal">
        <div class="modal-header">
          <h2>Settings Saved</h2>
          <button class="modal-close" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
          <p>Your settings have been updated:</p>
          <ul class="modal-values" id="settingsSummary"></ul>
        </div>
        <div class="modal-footer">
          <button class="btn-primary" id="okButton">OK</button>
        </div>
      </div>
    </div>

    <footer>Phonics Breaker Â© 2025</footer>

    <script>
      const modal = document.getElementById("settingsModal");
      const settingsSummary = document.getElementById("settingsSummary");
      const saveBtn = document.getElementById("saveSettings");
      const resetBtn = document.getElementById("resetSettings");
      const closeModal = document.getElementById("closeModal");
      const okButton = document.getElementById("okButton");

      const tickerSpeedValue = document.getElementById("tickerSpeedValue");
      const spacerLengthValue = document.getElementById("spacerLengthValue");

      const inputs = {
        volume: document.getElementById("volume"),
        theme: document.getElementById("theme"),
        tickerSpeed: document.getElementById("tickerSpeed"),
        spacerLength: document.getElementById("spacerLength"),
        spacerType: document.getElementById("spacerType"),
      };

      // Live update slider values
      inputs.tickerSpeed.addEventListener("input", () => {
        tickerSpeedValue.textContent = inputs.tickerSpeed.value;
      });
      inputs.spacerLength.addEventListener("input", () => {
        spacerLengthValue.textContent = inputs.spacerLength.value;
      });

      // Load stored settings
      window.addEventListener("DOMContentLoaded", () => {
        const saved = JSON.parse(localStorage.getItem("gameSettings"));
        if (saved) {
          Object.keys(saved).forEach((key) => {
            if (inputs[key]) {
              inputs[key].value = saved[key];
              if (key === "tickerSpeed")
                tickerSpeedValue.textContent = saved[key];
              if (key === "spacerLength")
                spacerLengthValue.textContent = saved[key];
            }
          });
        }
      });

      // Save settings
      saveBtn.addEventListener("click", () => {
        const settings = {};
        Object.keys(inputs).forEach((key) => {
          settings[key] = inputs[key].value;
        });
        localStorage.setItem("gameSettings", JSON.stringify(settings));
        showModal(settings);
      });

      // Reset settings
      resetBtn.addEventListener("click", () => {
        Object.values(inputs).forEach((el) => {
          if (el.tagName === "SELECT") el.selectedIndex = 0;
          else el.value = el.defaultValue || "";
        });
        tickerSpeedValue.textContent = inputs.tickerSpeed.value;
        spacerLengthValue.textContent = inputs.spacerLength.value;
        localStorage.removeItem("gameSettings");
      });

      // Show modal
      function showModal(settings) {
        settingsSummary.innerHTML = Object.entries(settings)
          .map(([k, v]) => `<li>${k}: ${v}</li>`)
          .join("");
        modal.classList.remove("hidden");
        modal.classList.add("visible");
      }

      [closeModal, okButton].forEach((btn) =>
        btn.addEventListener("click", () => {
          modal.classList.remove("visible");
          modal.classList.add("hidden");
        })
      );
    </script>
  </body>
</html>
